<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="{{ url_for('static', filename='jquery.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='./egg/egg.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='es.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='indexsetting.js') }}"></script>
<link rel="stylesheet" type="text/css" media="all" href="{{ url_for('static', filename='egg/egg.css') }}" />
<link rel="stylesheet" type="text/css" media="all" href="{{ url_for('static', filename='./es.css') }}" /> 
<link rel="stylesheet" type="text/css" media="all" href="{{ url_for('static', filename='./blocks.css') }}" /> 
</head>

<body>
<div style="float:right">
<a href=/>首页</a>
{% if session.has_key('username') %}
{{session['username']}}
<a href=/logout>登出</a>
{% else %}
<a href=/register>注册</a>
<a href=/login>登录</a>
{% endif %}
</div>

<div class="content">
{% for block in blocks%}
	<div class="block" id="b{{ block.uid }}"></div>
	<script type="text/javascript">
	$("#b{{ block.uid }}").width({{ block.width * 150 }});
	$("#b{{ block.uid }}").height({{ block.height * 150 }});
	{% if block.color %}
	$("#b{{ block.uid }}").css("background-color","{{block.color}}");
	{% endif %}
	</script>
	<form method="POST" action="/settingmodify/{{block['uid']}}">
		width<input type="text" name="width" value="{{block['width']}}" autocomplete="off"><br>
		height<input type="text" name="height" value="{{block['height']}}" autocomplete="off"><br>
		<input type="submit" value="change" name="change">
		<input type="submit" value="delete" name="delete">
	</form>
{% endfor %}
</div>

<form action="" method="POST">
	name:<input type="text" name="name" autocomplete="off"/>
	width:<input type="text" name="width" style="width:15px" autocomplete="off"/>
	height:<input type="text" name="height" style="width:15px" autocomplete="off"/>
<input type="submit" value="添加" name="add" autocomplete="off">
</form>

<form action="" method=post enctype=multipart/form-data>
      <p><input type=file name=file>
         <input type=submit name="upload" value=Upload>
    </form>

<input type=button name="down" value="下载配置文件" onClick="window.location='/downloadsetting'">

<br>
{% if session.has_key('username') %}
<a href=/dbupload>上传配置到服务器</a>
<a href=/dbdownload>从服务器下载配置</a>
{% endif %}

{% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul>
    {% for message in messages %}
        <li>{{ message }} </li>
    {% endfor %}
    </ul>
    {% endif %}
{% endwith %}

</body>